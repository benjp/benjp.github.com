<!-- HTML -->
<div id="indexTpl"></div>
<div class="row-fluid" id="indexRow1Tpl"></div>
<div class="row-fluid" id="indexRow2Tpl"></div>


<script id="uneTpl" type="text">
{{! TEMPLATE USED FOR FIRST ARTICLE}}
<div class="hero-unit">
  <div class="row-fluid">
    <div class="span4">
      <a href="#" class="thumbnail">
        <img src="{{img}}" alt="Une thumbnail">
      </a>
    </div>
    <div class="span8">
      <h2>{{title}}</h2>
      <p>{{desc}}</p>
      <a class="btn btn-primary btn-large" href="#article_1">Learn more &raquo;</a>
    </div>
  </div>
</div>
</script>


<script id="rowTpl" type="text">
{{! TEMPLATE USED FOR ROW OF 3 ARTICLES}}
{{#articles}}
  <div class="span4">
    <h3>{{title}}</h3>
    <p>{{desc}}</p>
    <p><a class="btn" href="#">View details &raquo;</a></p>
  </div><!--/span-->
{{/articles}}
</script>



<script>

  $.getJSON('json/articles.json', function(data) {

    // GET MUSTACHE TEMPLATES
    var uneTpl = $('#uneTpl').html();
    var rowTpl = $('#rowTpl').html();
  
    // RENDER THE FIRST ARTICLE
    var html = Mustache.to_html(uneTpl, data.articles[0]);
    $('#indexTpl').html(html);
    
    // RENDER ROW ARTICLES FROM 1 TO 3
    var tab = $.extend({}, data); // SHALLOW COPY OF DATA
    tab.articles = tab.articles.slice(1,4);    
    html = Mustache.to_html(rowTpl, tab);
    $('#indexRow1Tpl').html(html);

    // RENDER ROW ARTICLES FROM 4 TO 6
    var tab = $.extend({}, data); // SHALLOW COPY OF DATA
    tab.articles = tab.articles.slice(4,7);    
    html = Mustache.to_html(rowTpl, tab);
    $('#indexRow2Tpl').html(html);

  });    

</script>